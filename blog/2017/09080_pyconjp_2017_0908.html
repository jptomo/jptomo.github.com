<!DOCTYPE html>
<html lang="ja">
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="utf-8" />
    <meta property="og:title" content="PyCon JP 2017 9/8 分自分向けまとめ" />
    <meta property="og:type" content="article" />
    <meta property="og:description" content="PyCon JP 2017 9/8 分自分向けまとめ" />
    <meta property="og:url" content="http://tomoh1r.github.io/blog/2017/09080_pyconjp_2017_0908.html" />
    <meta property="og:image" content="http://tomoh1r.github.io/static/title_img_fb.png" />
    <meta property="og:site_name" content="適当に だらだらと 楽しく" />
    <meta property="og:email" content="quickness.net@gmail.com" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@tomoh1r" />
    <meta name="twitter:image" content="http://tomoh1r.github.io/static/title_img_twitter.png" />
    <meta name="twitter:image:width" content="632" />
    <meta name="twitter:image:height" content="512" />
    <title>PyCon JP 2017 9/8 分自分向けまとめ &mdash; 適当に だらだらと 楽しく</title>
    <link rel="stylesheet" href="../../static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../static/roles.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
    <script type="text/javascript" src="../../static/language_data.js"></script>
    <script type="text/javascript" src="../../static/translations.js"></script>
    <link rel="author" title="このドキュメントについて" href="../../about.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="PyCon JP 2017 9/9 分自分向けまとめ" href="09090_pyconjp_2017_0909.html" />
    <link rel="prev" title="複数の Bundle を使い分ける" href="07220_separate_ruby_bundle.html" />
    <meta name="viewport" content="width=480">

    <link rel="alternate" type="application/rss+xml" href="../../rss2.xml" title="適当に だらだらと 楽しく" />
    <link rel="alternate" type="application/atom+xml" href="../../atom.xml" title="適当に だらだらと 楽しく" />
  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            <ul>
              <li><a href="../../index.html">適当に だらだらと 楽しく</a></li>
              <li><a href="https://about.me/tomohiro.nakamura">about.me</a></li>
              <li><a href="../archives.html">archives</a></li>
              <li><a href="../../about.html">このサイトについて</a></li>
            </ul>
            <div class="clearer"></div>
            
  <div class="section" id="pycon-jp-2017-9-8">
<h1>PyCon JP 2017 9/8 分自分向けまとめ<a class="headerlink" href="#pycon-jp-2017-9-8" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p><span class="blog_date">2017/09/08</span></p>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#id2" id="id3">キーノート</a></p></li>
<li><p><a class="reference internal" href="#typing-py" id="id4">202) ベンリに使おう変数アノテーション - typing.pyとの楽しいお付き合い</a></p></li>
<li><p><a class="reference internal" href="#python" id="id5">203) Pythonとパッケージングと私</a></p></li>
<li><p><a class="reference internal" href="#django" id="id6">202) Djangoフレームワークのユーザーモデルと認証</a></p></li>
<li><p><a class="reference internal" href="#len" id="id7">203) len()関数がオブジェクトの長さを手にいれる仕組み</a></p></li>
<li><p><a class="reference internal" href="#how-and-why-we-speak-in-unicode" id="id8">201) How (and Why) We Speak in Unicode</a></p></li>
<li><p><a class="reference internal" href="#secrets-of-a-wsgi-master" id="id9">201) Secrets of a WSGI master.</a></p></li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id3">キーノート</a><a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><p>協力してくれと Guide にいったら自分でやってと</p></li>
<li><p>Numba Bokeh Dask とか必要な者を作成した。</p></li>
<li><p>Python は LEGO のようだ</p></li>
<li><p>QandA</p>
<ul>
<li><p>なぜパッケージング最近問題が起きているか？</p>
<ul>
<li><p>昔は Python パッケージングばらばらだった。動くようにした。また、依存ライブラリのインストールも有り、このようにしている。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="typing-py">
<h2><a class="toc-backref" href="#id4">202) ベンリに使おう変数アノテーション - typing.pyとの楽しいお付き合い</a><a class="headerlink" href="#typing-py" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://speakerdeck.com/puhitaku/bian-li-nishi-oubian-shu-afalsetesiyon-typing-dot-py-tofalsele-siiofu-kihe-i">資料へのリンク</a> (Speaker Deck)</p>
<ul class="simple">
<li><p>PEP と実装の mypy の両輪で設計が進んできた。</p>
<ul>
<li><p>Syntax (書き方) と Semantics (int とか) の熟議がされてきた。</p></li>
</ul>
</li>
<li><p>実装時に annotation が読めるようになった。</p></li>
<li><p>typings により型を詳細に、例えば文字列のリスト List[str] とか、書けるようになるジェネリック型が導入された。</p></li>
<li><p>後はこれらの仕組みの使い方</p></li>
</ul>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id5">203) Pythonとパッケージングと私</a><a class="headerlink" href="#python" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://www.slideshare.net/aodag/python-79546865">資料へのリンク</a> (SlideShare)</p>
<ul class="simple">
<li><p>pip について requirements.txt は広く使われているが、 pip freeze の結果を constrains.txt として書き出し、lock ファイルとして利用することができる。</p></li>
<li><p>virtualenv は古い setuptools/pip が同梱されているので注意。</p></li>
<li><p>setup.py について、通常設定ファイルで綴じることができるように策定が進められている。</p>
<ul>
<li><p>普通に書くと、設定と実行コードが混在する。</p></li>
<li><p>setup.cfg にメタデータ (metadata) とオプション (option) を切り出すと見通しが良くなる。</p>
<ul>
<li><p>ただし、ある程度後発の setuptools でないと対応していない。</p></li>
<li><p>file: でファイルの内容を読み込めるようになる。ただし一ファイルのみ。</p></li>
<li><p>attr: でオブジェクトの属性、または callable の戻り値を取得できるようになる。</p></li>
<li><p>後は options に extras_require, packages.find でパッケージの検知とか。</p></li>
<li><p>ただし、 <a class="reference external" href="https://docs.openstack.org/pbr/latest/">pbr</a> の書き方と異なるので、併用できない。</p>
<ul>
<li><p>とはいえ、 <a class="reference external" href="https://github.com/pypa/setuptools_scm">setuptools_scm</a> を利用するといくつかの機能を使うことができる。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>build-system について、 setuptools の対応している境界を定義し、仕様として定義する取り組みが進められている。</p>
<ul>
<li><p>PEP-516,517 で議論。516 でコマンドラインでの実装は rejected。517 で api ベースで改めて。</p></li>
<li><p>PEP-518 でメタデータの仕様を策定。</p></li>
<li><p><a class="reference external" href="https://flit.readthedocs.io/en/latest/">flit</a> って実装が、おそらくテストベッド的な者だけど、出てきている。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="django">
<h2><a class="toc-backref" href="#id6">202) Djangoフレームワークのユーザーモデルと認証</a><a class="headerlink" href="#django" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://www.slideshare.net/tokibito/django-79549364">資料へのリンク</a> (SlideShare)</p>
<ul class="simple">
<li><p>Django も基本の HTTP セッションの仕組みに乗っていて動いている。</p></li>
<li><p>Django の contribution としてデフォルトで有効な django.contrib.auth がある。</p>
<ul>
<li><p>View は Class Baased View になった。</p></li>
<li><p>login 必須な view は decorator で指定する。</p></li>
</ul>
</li>
<li><p>実際の処理は？</p>
<ul>
<li><p>セッションのユーザーを確認して、DB 問い合わせる。</p></li>
</ul>
</li>
<li><p>認証データはどう扱われているか？</p>
<ul>
<li><p>AuthenticationMiddleware クラスで、ユーザーID の取得と DB への問い合わせを行っている。</p></li>
<li><p>アルゴリズム PBKDF2</p></li>
</ul>
</li>
<li><p>カスタマイズ</p>
<ul>
<li><p>ユーザークラスの変更や、 LDAP OpenID とか利用可能。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="len">
<h2><a class="toc-backref" href="#id7">203) len()関数がオブジェクトの長さを手にいれる仕組み</a><a class="headerlink" href="#len" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p><a class="reference external" href="https://www.slideshare.net/shimizukawa/how-does-python-get-the-length-with-the-len-function">資料へのリンク</a> (SlideShare)</p>
<ul class="simple">
<li><p>len() は各オブジェクト (後で確認したい) の __len__() の結果。</p>
<ul>
<li><p>__len__() が int を返さないと TypeError おこる。int 以外の場合の意味は、ユースケースがあるのではなく int を返せとただそういうことなんだろう。 (後で確認したい)</p></li>
</ul>
</li>
<li><p>bool()</p>
<ul>
<li><p>内部的に len() が 0以上のときか __bool__() が true</p></li>
</ul>
</li>
<li><p>iter() の例</p></li>
<li><p>abc を利用して protocol を明示するのは良い。</p></li>
<li><p>(後で len() vs .length の議論を追いたい。個人的には変更するコストなんだろうとは思うけど)</p></li>
</ul>
</div>
<div class="section" id="how-and-why-we-speak-in-unicode">
<h2><a class="toc-backref" href="#id8">201) How (and Why) We Speak in Unicode</a><a class="headerlink" href="#how-and-why-we-speak-in-unicode" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>テンポ良かった。。。</p>
<ul class="simple">
<li><p>人類は昔から文字列の伝達のための表現 (文字コード) を考えてきた。途中、文字列の種類の扱いも考えだした。</p>
<ul>
<li><p>モールス信号について、文字列から信号への変換は endode、信号を文字列に返るのは decode。</p></li>
<li><p>モールス信号は 2進数だけど、指の数 5進数のも出てきた。改善された。パンチカードのようだ。</p></li>
<li><p>ASCII が戦後でてきた。ARPANET とかー。でだいたいアメリカで使う分には問題なかった。</p></li>
<li><p>Latin-1 がでてきた。</p></li>
<li><p>日本語、漢字ひらがなカタカナあって辛いよね。キャラクターセット。そして文字コードの JIS-X-0201 Shift-JIS EUC-JP</p></li>
<li><p>漢字マックから Unicode がでてきた。</p></li>
<li><p>キャラクターセットとして USC-2 が出てきた。</p></li>
<li><p>USC-4 もでてきた。</p></li>
<li><p>エンコーディングとして UTF-8 が出てきた。</p></li>
</ul>
</li>
<li><p>Python 3 は文字列の扱いについて安全になっているので、 Python 3 を使いましょう。</p>
<ul>
<li><p>Python 2 は str と Unicode、 Python 3 は Unicode と Byte</p></li>
<li><p>Python 2 は str と Unicode 結合できるけど、 Python 3 は Unicode と Byte 結合できないので、安全。</p></li>
<li><p>Python 3 使え</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="secrets-of-a-wsgi-master">
<h2><a class="toc-backref" href="#id9">201) Secrets of a WSGI master.</a><a class="headerlink" href="#secrets-of-a-wsgi-master" title="このヘッドラインへのパーマリンク">¶</a></h2>
<ul class="simple">
<li><p>mod_wsgi は実は mod_wsgi-express といったコマンドもある。直接 WSGI ファイルを読み込み実行することができる。</p>
<ul>
<li><p>直接 http レスポンスを返せる。</p></li>
<li><p>docker でも利用できる。起動ユーザーを指定することもできる。</p></li>
</ul>
</li>
<li><p>warpdrive といった環境構築アプリも作成をした。これを利用して Dockerfile なしに Docker Image を作成できる。</p></li>
<li><p>mod_wsgi は Apache のプラグインのイメージがあるが、別にたてる Daemon モードもある。</p></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div id="disqus_thread"></div>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, <a href="https://about.me/tomohiro.nakamura">Tomohiro NAKAMURA</a>.| Powered by <a href="http://sphinx-doc.org/">Sphinx</a>
      &amp; customized <a href="https://github.com/bitprophet/alabaster">Alabaster</a>| <a href="../../sources/blog/2017/09080_pyconjp_2017_0908.rst.txt"
          rel="nofollow">Page source</a></div><script type="text/javascript">
      var disqus_shortname = 'tomoh1r';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-62097156-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>